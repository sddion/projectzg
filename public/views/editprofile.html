<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Edit Profile - Social App</title>
        <link rel="stylesheet" href="/css/styles.css" />
        <link rel="stylesheet" href="/css/editprofile.css" />
        <script src="/js/authCheck.js" defer></script>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <button
                    class="back-btn"
                    onclick="location.href='/profile.html'"
                >
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15 19l-7-7 7-7"
                        />
                    </svg>
                </button>
                <div class="header-title">Edit Profile</div>
                <div></div>
            </div>

            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar">
                    <svg
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        style="width: 48px; height: 48px"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                        />
                    </svg>
                </div>
                <input
                    type="file"
                    id="avatar-file-input"
                    accept="image/*"
                    style="display: none"
                />
                <div
                    class="profile-handle"
                    id="change-avatar-btn"
                    style="cursor: pointer; color: #6366f1"
                >
                    Edit picture
                </div>
                <div
                    id="upload-status"
                    style="
                        font-size: 0.875rem;
                        margin-top: 0.5rem;
                        text-align: center;
                    "
                ></div>
            </div>

            <div class="form">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input
                        type="text"
                        class="form-input"
                        id="profile-username"
                        value=""
                        readonly
                        style="background: #f5f5f5; cursor: not-allowed"
                    />
                    <small style="color: #666; font-size: 0.875rem">
                        Username cannot be changed
                    </small>
                </div>
                <div class="form-group">
                    <label class="form-label">Display Name</label>
                    <input
                        type="text"
                        class="form-input"
                        id="profile-display-name"
                        value=""
                    />
                </div>
                <div class="form-group">
                    <label class="form-label">Bio</label>
                    <textarea
                        class="form-input"
                        id="profile-bio"
                        rows="4"
                        maxlength="160"
                    ></textarea>
                    <small style="color: #666; font-size: 0.875rem">
                        <span id="bio-count">0</span>/160 characters
                    </small>
                </div>
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <select class="form-input" id="profile-gender">
                        <option value="">Prefer not to say</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <button
                    class="btn btn-primary"
                    id="save-btn"
                    style="width: 100%"
                >
                    Save
                </button>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"
            defer
        ></script>
        <script src="/js/supabaseClient.js" defer></script>
        <script src="/js/api.js" defer></script>
        <script src="/js/editprofile.js" defer></script>
    </body>
</html>
